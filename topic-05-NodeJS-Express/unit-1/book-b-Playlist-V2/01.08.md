## Songs hinzufügen

Soeben haben Sie sich auf Ihrer Playlist-Detail Seite den Namen einer Playlist anzeigen lassen.
Nun wollen wir darunter eine Liste der Songs anzeigen, die zu der angefragten Playlist gehören.

### Model anpassen
Zuerst wollen wir ein Model erstellen, dass uns alle zu einer Playlist gehörenden Songs gibt.
Erstellen Sie dazu eine neue Datei `song-store.js` im Models Ordner und packen Sie darin folgenden Code:

~~~ js
    const dataStore = require("./data-store.js"); 
    const dataStoreClient = dataStore.getDataStore(); 
    const logger = require("../utils/logger.js"); 
     
    const songStore = { 
        async getSongsForPlayList(playListId) { 
            const query = 'SELECT * FROM playlist_songs WHERE playlist_id=$1'; 
            const values = [playListId]; 
            try { 
                let result = await dataStoreClient.query(query, values); 
                return result.rows; 
            } catch (e) { 
                logger.error("Error fetching songs for playlist" ,e); 
            } 
        }, 
    }; 
     
    module.exports = songStore; 
~~~

Dieser Code stellt Ihnen das Modul `songStore` zur Verfügung, dass wir nun im vorhandenen Playlist Controller nutzen wollen.

### Controller: 
Unser Controller muss nun noch die Songs aus dem Model abfragen, um diese an den View weiter zu geben.
Passen Sie den Controller an, sodass dieser folgendem Code entspricht.

~~~ js
    async index(request, response) { 
    const playlistId = request.params.id; 
    const playlist = await playlistStore.getPlaylist(playlistId); 
    const songs = await songStore.getSongsForPlayList(playlistId); 
    logger.info('Playlist id = ' + playlistId); 
    const viewData = { 
        title: 'Playlist', 
        playlist: playlist, 
        songs: songs 
    }; 
    response.render('playlist', viewData); 
}, 
~~~

### View modifizieren:
Zuletzt soll der View angepasst werden, dass auch alle Songs angezeigt werden. Am einfachsten ist es, wenn Sie das bereits bekannte `listsongs.hbs`nutzen.

Um den partiellen View zu integrieren, passen Sie den View wie folgt an:
~~~ handlebars
    <div class="border p-2 my-2"> 
    <h2 class="text-center">{{playlist.title}}</h2> 
    {{> listsongs}} 
</div> 
~~~

Das Ergebnis dürfte dann wie folgt aussehen:
![img.png](img/Anpassung_07.png)